library AgeAtMP version '1'

using QUICK

/* valueset "Female Administrative Sex": 'urn:oid:2.16.840.1.113883.3.560.100.2' */
valueset "Acute Pharyngitis": '2.16.840.1.113883.3.464.1003.102.12.1011'
valueset "Acute Tonsillitis": '2.16.840.1.113883.3.464.1003.102.12.1012'

parameter MeasurementPeriod default Interval[DateTime(2013, 1, 1, 0, 0, 0, 0), DateTime(2014, 1, 1, 0, 0, 0, 0))

context Patient

define "InDemographic":
  AgeInYearsAt(start of MeasurementPeriod) >= 2 and AgeInYearsAt(start of MeasurementPeriod) < 100

define "PatientIsFemale":
  Patient.gender = 'F'

define "Pharyngitis":
    exists ([Condition: "Acute Pharyngitis"])

define "Tonsillitis":
    exists ([Condition: "Acute Tonsillitis"])

context Unfiltered

define "fdsa":
  Count(InDemographic ID where ID is true and PatientIsFemale PF where PF is true)
